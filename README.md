RISC-V Ibex Core with Built-In Self-Test (BIST) Integrationüìå Executive SummaryThis project demonstrates the integration of a custom Built-In Self-Test (BIST) architecture into the execution stage of the open-source RISC-V Ibex Processor. The design encapsulates the core Arithmetic Logic Unit (ALU) and Multiplier/Divider (MultDiv) within a proprietary BIST wrapper, enabling self-verification capabilities while maintaining compatibility with standard RISC-V instructions.A critical challenge regarding bit-width mismatches (34-bit internal vs. 32-bit interface) was resolved through RTL engineering, and the final design was successfully synthesized and verified using Xilinx Vivado.üèóÔ∏è System ArchitectureThe project replaces the standard Ibex execution block with a wrapped version that includes test logic.Top Module: ibex_alu_bist_wrapperCore Modules:ibex_alu: Standard Arithmetic Logic Unit.ibex_multdiv_fast: Fast Multiplier/Divider unit (Modified).Functionality: The wrapper intercepts operands, manages the BIST state machine (optional expansion), and drives the execution units.üîß Technical Challenges & RTL ModificationsDuring the integration, a significant compatibility issue was identified between the Ibex MultDiv unit and the custom 32-bit BIST architecture.üî¥ The Problem: Bit-Width MismatchThe ibex_multdiv_fast module internally utilized a 34-bit signed data path ([33:0]) for intermediate calculations, whereas the target BIST wrapper was designed for a standard 32-bit RISC-V interface ([31:0]). This caused synthesis failures and connectivity issues.üü¢ The Solution: Surgical RTL TruncationTo resolve this, the internal datapath of the MultDiv unit was modified:Signal Truncation: The intermediate value signal imd_val_q_i was truncated from 34-bits to 32-bits ([31:0]).Logic Adaptation: Bit-slicing operations in the SystemVerilog source code were updated (e.g., [33:16] $\rightarrow$ [31:16]).MSB Handling: Logic blocks attempting to access the removed upper bits ([33:32]) were hardwired to 2'b00 to prevent synthesis errors while preserving arithmetic correctness for unsigned operations.üìä Verification & Simulation ResultsThe integrated design was verified using a behavioral testbench (tb_ibex_ex_block.sv) in Vivado. The simulation confirms that the BIST wrapper correctly drives the processor core and retrieves accurate results despite the bit-width modifications.Waveform AnalysisTest CaseOperationInputsExpected OutputMeasured OutputStatusTest 1ALU ADD15 + 2540 (0x28)40 (0x28)‚úÖ PASSTest 2ALU SUB100 - 3070 (0x46)70 (0x46)‚úÖ PASSTest 3MULT (Standard)12 * 12144 (0x90)144 (0x90)‚úÖ PASSTest 4MULT (Stress Test)1000 * 500500,000 (0x7A120)500,000 (0x7A120)‚úÖ PASSNote on Test 4: The stress test explicitly proves that truncating the internal sign-extension bits inside the multiplier did not cause overflow or data corruption for 32-bit operations. The result 0x7A120 is mathematically correct ($500,000$).üìâ Synthesis Results (Xilinx Vivado)The design achieves efficient resource utilization, suitable for low-power FPGA implementations.Resource TypeUsedUtilizationSlice LUTs625< 1%Slice Registers283< 1%DSP Blocks1< 1%Timing Analysis: The design meets timing constraints with a Worst Negative Slack (WNS) of +4.940 ns, supporting operation speeds up to ~200 MHz.üìÇ Directory StructurePlaintextRISCV-Safety-BIST-IP/
‚îú‚îÄ‚îÄ HDL/            # SystemVerilog Source Files (Modified Ibex Core & Wrapper)
‚îú‚îÄ‚îÄ Test/           # Testbenches and Cocotb Scripts
‚îú‚îÄ‚îÄ Reports/        # Synthesis, Timing, and Utilization Reports
‚îú‚îÄ‚îÄ README.md       # Project Documentation
‚îî‚îÄ‚îÄ RISC-BIST.png   # Simulation Waveform Image
üöÄ How to RunClone the Repository:Bashgit clone https://github.com/gitBeraTB/RISCV-Safety-BIST-IP.git
Open in Vivado:Create a new project.Add files from the HDL folder.Set ibex_ex_block or ibex_alu_bist_wrapper as the Top Module.Run Simulation:Add Test/tb_ibex_ex_block.sv as a simulation source.Run Behavioral Simulation.Project developed by [Berath] as part of a RISC-V Safety & Verification study.
